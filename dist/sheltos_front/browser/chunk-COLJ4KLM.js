import{a as h,c as u,e as d,f as g,g as a,h as p,i as y}from"./chunk-2BEIYH36.js";import{c as i,ea as l,ia as f}from"./chunk-NXIMDZUX.js";import{g as o}from"./chunk-RA2WU32H.js";var R=(()=>{let s=class s{constructor(){this.database=f(h)}checkUserExists(t){return o(this,null,function*(){try{let r=a(this.database,`users/${t}`);return(yield u(r)).exists()}catch(r){return console.error("Error checking user existence:",r),!1}})}createUser(t,r){return o(this,null,function*(){try{let e=a(this.database,`users/${t}`);yield p(e,r),console.log("User created successfully:",t)}catch(e){throw console.error("Error creating user:",e),e}})}updateUser(t,r){return o(this,null,function*(){try{let e=a(this.database,`users/${t}`);yield y(e,r),console.log("User updated successfully:",t)}catch(e){throw console.error("Error updating user:",e),e}})}getUser(t){return new i(r=>{let e=a(this.database,`users/${t}`),w=g(e,n=>{n.exists()?r.next(n.val()):r.next(null)},n=>{console.error("Error getting user:",n),r.error(n)});return()=>{d(e)}})}getUserOnce(t){return o(this,null,function*(){try{let r=a(this.database,`users/${t}`),e=yield u(r);return e.exists()?e.val():null}catch(r){return console.error("Error getting user once:",r),null}})}updateLastLogin(t){return o(this,null,function*(){try{yield this.updateUser(t,{lastLogin:Date.now()})}catch(r){throw console.error("Error updating last login:",r),r}})}};s.\u0275fac=function(r){return new(r||s)},s.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})();export{R as a};
