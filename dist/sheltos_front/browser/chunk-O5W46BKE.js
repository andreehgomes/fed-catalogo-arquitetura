import{X as m,c as l,ca as b,f as g,ia as a,pc as p,qc as D,rc as w,sa as v,ua as d,wa as f,xa as y}from"./chunk-NXIMDZUX.js";function U(t){t||(t=a(d));let e=new l(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(m(e))}function T(t,e){let n=e?.injector??a(v),r=new g(1),u=w(()=>{let o;try{o=t()}catch(i){p(()=>r.error(i));return}p(()=>r.next(o))},{injector:n,manualCleanup:!0});return n.get(d).onDestroy(()=>{u.destroy(),r.complete()}),r.asObservable()}function F(t,e){let r=!e?.manualCleanup?e?.injector?.get(d)??a(d):null,u=x(e?.equal),o;e?.requireSync?o=f({kind:0},{equal:u}):o=f({kind:1,value:e?.initialValue},{equal:u});let i,c=t.subscribe({next:s=>o.set({kind:1,value:s}),error:s=>{o.set({kind:2,error:s}),i?.()},complete:()=>{i?.()}});if(e?.requireSync&&o().kind===0)throw new b(601,!1);return i=r?.onDestroy(c.unsubscribe.bind(c)),D(()=>{let s=o();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new b(601,!1)}},{equal:e?.equal})}function x(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function L(t){t===void 0&&(t=a(v));let e=t.get(y);return n=>new l(r=>{let u=e.add(),o=!1;function i(){o||(u(),o=!0)}let c=n.subscribe({next:s=>{r.next(s),i()},complete:()=>{r.complete(),i()},error:s=>{r.error(s),i()}});return c.add(()=>{r.unsubscribe(),i()}),c})}export{U as a,T as b,F as c,L as d};
